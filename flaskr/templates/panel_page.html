{% extends 'base.html' %}

{% block title %}Panel Page{% endblock %}

{% block content %}
  <form method="POST" id="filterForm">
    <h1>Panel Model</h1>

    <div class="input-container">
      <label for="panel-select">Select Panel:</label>
      <input list="panels" id="panel-input" name="panel_name" autocomplete="off" value="{{ panel_name or '' }}"/>

      <datalist id="panels">
        {% for name in panel_names %}
          <option value="{{ name }}"></option>
        {% endfor %}
      </datalist>
    </div>

    <div class="input-container">
      <label for="power-select">Select Power:</label>
      <input type="number" name="power_input" id="power_input" min="0" max="1000" step="1" value="{{ power or ''}}"/>W
    </div>

    <div class="input-container">
      <label for="height-select">Select Height:</label>
      <input type="number" name="height_input" id="height_input" min="0" max="5" step="0.1" value="{{ height or ''}}"/>M
    </div>
    
    <div class="input-container">
      <label for="width-select">Select Width:</label>
      <input type="number" name="width_input" id="width_input" min="0" max="5" step="0.1" value="{{ width or ''}}"/>M
    </div>
    
    <button type="button" class="button-primary" onclick="filterTable()" style="margin-top: 1rem;">
      <span>Filter</span>
    </button>
    
    <form method="POST" id="editUpdate">
      <div style="max-height: 300px; overflow-y: auto; border: 1px solid #ccc;">
        <table border="1" cellpadding="5" cellspacing="0" id="panel-table" style="width: 100%;">
          <thead>
            <tr>
              <th>Panel Name</th>
              <th>Height (m)</th>
              <th>Width (m)</th>
              <th>Number of Cells</th>
              <th>Max Power (W)</th>
            </tr>
          </thead>
          <tbody>

          </tbody>
        </table>
      </div>
      <button type="button" class="button-primary" onclick="calcPower()" style="margin-top: 1rem;">
        <span>Calculate Power</span>
      </button>
      <button type="button" class="button-primary" onclick="updateDB()" style="margin-top: 1rem;">
        <span>Save Edit</span>
      </button>
    </form>
    
    <div class="input-container">
      <button id="generate" type="submit">Create Panel</button>
    </div>

    {% if error %}
      <div class="error" style="color: red; margin: 10px 0;">
        Error: {{ error }}
      </div>
    {% endif %}

    <script src="{{ url_for('static', filename='javascript/grid.js')}}"></script>
  </form>
{% endblock %}
